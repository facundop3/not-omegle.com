(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t){},149:function(e,t){},179:function(e,t){},183:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(9),r=n.n(c),i=(n(92),n(3)),l=n(79),u=n(80),s=n(4),m=n.n(s),d=n(15),f=n.n(d),b=function(e){var t=e.showModal,n=e.isInitiator,a=e.hideModal,c=e.handlerAcept;return o.a.createElement(f.a,{size:"sm",show:t,onHide:a,"aria-labelledby":"example-modal-sizes-title-sm"},o.a.createElement(f.a.Dialog,{show:t},o.a.createElement(f.a.Header,{closeButton:!0},o.a.createElement(f.a.Title,null,n?"Creating videocall room":"Joining videocall room")),o.a.createElement(f.a.Body,null,n?o.a.createElement("p",null,"In order to create the videocall room we are going to reques access to your webcam and mic"):o.a.createElement("p",null,"In order to join the a videocall room we are going to reques access to your webcam and mic")),o.a.createElement(f.a.Footer,null,o.a.createElement(m.a,{variant:"secondary",onClick:a},"Cancel"),o.a.createElement(m.a,{variant:"primary",onClick:function(){c(n),a()}},"Acept"))))};function v(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return v=function(){return e},e}var E=u.a.div(v()),g=function(e){var t=e.handlerAcept,n=e.initiator,c=e.toggleIsInitiator,r=Object(a.useState)(!1),l=Object(i.a)(r,2),u=l[0],s=l[1];return o.a.createElement("div",null,o.a.createElement(E,null,o.a.createElement(m.a,{className:"btn btn-primary ml-1",onClick:function(e){s(!0),c(!0)},variant:"primary"},"Cereate a videochat room"),o.a.createElement(m.a,{className:"btn btn-success ml-1",onClick:function(e){c(!1),s(!0)},variant:"primary"},"Join a videochat room")),o.a.createElement(b,{handlerAcept:t,showModal:u,isInitiator:n,toggleIsInitiator:c,hideModal:function(){s(!1)}}))},p=n(85),h=n(14),j=n.n(h),w=n(32),O=n.n(w),y=n(42),I=n.n(y);var k=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),o=n[0],c=(n[1],Object(a.useState)([])),r=Object(i.a)(c,2),l=r[0],u=(r[1],Object(a.useState)(new I.a({initiator:e,trickle:!1}))),s=Object(i.a)(u,2),m=s[0],d=s[1];return Object(a.useEffect)(function(){navigator.getUserMedia({video:!0,audio:!0},function(t){d(new I.a({initiator:e,trickle:!1,stream:t}))},function(e){console.log("Webrtc not supported on current browser",e)})},[e]),{yourId:o,messagesList:l,peer:m}},S=function(e){var t=e.initiator,n=e.videoTag,c=e.createRoom,r=e.socketId,i=k(t).peer;return Object(a.useEffect)(function(){i.on("signal",function(e){c(e)}),i.on("data",function(e){var t=new TextDecoder("utf-8").decode(e);console.log(function(e){return[].concat(Object(p.a)(e),[t])})}),i.on("stream",function(e){!function(e){n.current.srcObject=e,n.current.play()}(e)})},[i]),o.a.createElement(j.a,{className:"mb-3"},o.a.createElement(j.a.Prepend,null,o.a.createElement(m.a,{variant:"outline-secondary"},"Room ID")),o.a.createElement(O.a,{"aria-describedby":"basic-addon1",readOnly:!0,value:r}))},C=n(83),R=n.n(C)()("http://localhost:3030");var T={suscribeToRoomConnectionData:function(e){R.on("room-connection-data",function(t){return e(t)})},createRoom:function(e){R.emit("create-room-data",e)},connectToRoom:function(e){R.emit("connect-to-room",e)},getSocketId:function(){return R.id}},D=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=(k(!1).peer,function(e){e.preventDefault(),c?(console.log("Join room"),console.log(c),T.connectToRoom(c)):console.log("No value :S")});return o.a.createElement("form",{onSubmit:l},o.a.createElement(j.a,{className:"mb-3"},o.a.createElement(j.a.Prepend,null,o.a.createElement(m.a,{variant:"outline-secondary"},"Room ID")),o.a.createElement(O.a,{"aria-describedby":"basic-addon1",value:c,onChange:function(e){r(e.target.value)}}),o.a.createElement(j.a.Append,null,o.a.createElement(m.a,{variant:"outline-primary",onClick:l},"Join room"))))};var N=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(null),l=Object(a.useState)(!1),u=Object(i.a)(l,2),s=u[0],m=u[1],d=Object(a.useState)("test"),f=Object(i.a)(d,2),b=f[0],v=f[1],E=function(e){console.log(e)};return Object(a.useEffect)(function(){T.suscribeToRoomConnectionData(E),v(T.getSocketId())},[]),o.a.createElement("div",{className:"container"},o.a.createElement("header",null,o.a.createElement("h1",{className:"text-center"},"Simle peer to peer videocall")),o.a.createElement("br",null),o.a.createElement(g,{handlerAcept:function(e){c(e),m(!0)},initiator:n,toggleIsInitiator:function(e){c(e)}}),o.a.createElement("br",null),s&&(n?o.a.createElement(S,{initiator:n,videTag:r,createRoom:T.createRoom,socketId:b}):o.a.createElement(D,null)),o.a.createElement("video",{width:"750",height:"500",ref:r}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(182);var A=n(84),J=n(12);A.a.add(J.e,J.b,J.g,J.c,J.f,J.a,J.d),r.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,n){e.exports=n(183)},92:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.cc650402.chunk.js.map